# 🧩 회의록: Agent Builder 오류 분석 및 실행 안정성 개선 방안

**회의 일자:** 2025년 11월 4일  
**주제:** Agent Builder 실행 단계 점검 및 파이프라인 안정성 강화 방안  

**참석자:**  
- 장진형  
- 박기주  
- 변영승  
- 심창완  

---

## 1. Agent Builder 기능 향상 현황 보고

- **사용자 기반 테스트 케이스 추출 성공**  
  - 실제 사용자 로그 및 세션 데이터를 기반으로 **테스트 케이스 자동 추출**에 성공.  
  - 기존 스펙 기반 접근에서 **사용자 행동 기반 접근**으로 전환하여 실사용 시나리오 커버리지가 확대됨.

- **테스트 케이스 추출 정확성 개선**  
  - 프롬프트 최적화 및 컨텍스트 리라이팅을 통해 **불필요한 케이스 중복 최소화**.  
  - 시나리오 단위 세분화(예: “로그인→상품 선택→결제”)로 **실행 성공률 약 +15%p 향상** 확인.

- **Semantic Embedding을 통한 DOM 요소 식별 정확도 향상**  
  - DOM 요소 선택 과정에서 발생하던 **Selector Ambiguity** 문제를 해소하기 위해 **Semantic Embedding 기반 의미 유사도 매칭 알고리즘**을 적용.  
  - 단순 문자열 비교 대신 **LLM 명령어와 DOM 요소의 의미적 일치도(Semantic Similarity)**를 평가함으로써  
    **요소 인식 정확도 약 20%p 향상** 및 **클릭·입력 이벤트의 안정성 개선** 달성.

---

## 2. 파이프라인 실행 단계 현황

- **Phase 1~3 (케이스 생성 및 변환):**  
  LLM 기반 테스트 케이스 생성 → JSON 명령어 변환 → Playwright 실행 준비까지 정상 동작.  

- **Phase 4 (실행 단계):**  
  일부 시나리오에서 이벤트 타이밍 불일치 및 DOM 매칭 오류가 간헐적으로 발생.  
  특히 복잡한 UI 동작(hover, clipboard, session guard 등)에서 안정성 확보 필요.

---

## 3. 테스트 대상 사이트 및 의도적 오류 주입 시나리오

- **테스트 대상 사이트:** [https://test-sitev2.vercel.app/](https://test-sitev2.vercel.app/)  
- 아래 5건은 **의도적으로 주입된 오류 케이스**이며,  
  실제 결함이 아닌 **파이프라인의 탐지 및 대응 능력 검증**을 위해 수행됨.  
  단, **ER(Error Rate)** 계산에는 포함되어 **탐지율 성능 측정용 지표로 반영됨.**

| 번호 | 주입 시나리오 | 검증 목적 |
|------|----------------|-----------|
| 1 | **특수 기호 없이 회원가입 성공** | 입력 검증 정상 동작 여부 확인 |
| 2 | **오류 버튼 클릭 시 성공 메시지 발생** | 메시지 매핑 및 에러 핸들러 검증 |
| 3 | **마우스 호버 기능 마지막 요소 색상 미변경** | hover 이벤트 정상 반응 검증 |
| 4 | **URL 복사 시 클립보드 미복사** | Clipboard API 동작 여부 확인 |
| 5 | **비로그인 상태에서 장바구니 활성화** | 인증 및 세션 가드 검증 |

---

## 4. 분석 및 개선 방향

- **오류 원인 요약**
  - DOM 요소 식별은 Semantic Embedding으로 개선되었으나,  
    일부 이벤트 기반 동작에서 **비동기 타이밍 불일치** 및 **동적 요소 로드 지연** 문제가 관찰됨.  
  - 파이프라인이 의도적 오류를 감지하지 못하거나 잘못 분류하는 사례 존재.

- **개선 과제**
  1. **Semantic Embedding 매칭 고도화**  
     - DOM 트리 내 유사도 벡터를 캐시화하여 재활용,  
       테스트 반복 시 불필요한 Embedding 계산 제거로 **처리 효율 및 정확도 동시 향상**.  
  2. **오류 탐지 및 재시도 로직 강화**  
     - 이벤트 실패 시 **자동 재시도 → 실패 로그화 → 다음 케이스 이동** 구조로 개선.  
     - 탐지 실패 사례는 ER에 자동 반영되도록 모니터링 파이프라인 통합 예정.  
  3. **UI 이벤트 모듈 분리**  
     - hover, clipboard, session guard 등 **비정형 이벤트 전용 헬퍼 모듈화**로 관리성 강화.

---

## ✅ 결론 (2025-11-04)

- **Semantic Embedding 적용으로 DOM 요소 식별 정확도 대폭 향상.**  
- **의도적 오류 주입 테스트를 통해 파이프라인 탐지 성능 검증 체계 구축.**  
- **Phase 4(실행 단계) 안정성 강화** 및 **오류 재시도/탐지 자동화 로직 개선**을  
  다음 주(11월 11일 회의) 주요 과제로 설정.
